(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{19:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n(14),u=n.n(r),a=(n(19),n(3)),o=n(4),i=n.n(o),l="https://p3-phonebook-backend.herokuapp.com/api/persons",s=function(){return i.a.get(l)},j=function(e){return i.a.post(l,e)},d=function(e){return i.a.delete("".concat(l,"/").concat(e))},b=n(0),h=function(e){var t=e.filterText,n=e.persons,c=e.handleDelete;return Object(b.jsx)("ul",{children:n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e,t){return Object(b.jsx)(p,{person:e,handleDelete:c},t)}))})},p=function(e){var t=e.person,n=e.handleDelete;return Object(b.jsxs)("li",{children:[t.name," ",t.phonenumber," ",Object(b.jsx)("button",{onClick:function(){return n(t.id)},children:"delete"})]})},f=function(e){var t=e.text;return null===t?null:Object(b.jsx)("div",{className:"changeText",children:t})},x=function(e){var t=e.text;return null===t?null:Object(b.jsx)("div",{className:"errorText",children:t})},O=function(e){return Object(b.jsxs)("div",{children:[e.text," ",Object(b.jsx)("input",{value:e.inputText,onChange:e.onChange})]})},m=function(e){var t=e.inputTypes;return Object(b.jsx)("form",{children:t.map((function(e,t){return Object(b.jsx)(v,{inputInfo:e},t)}))})},v=function(e){var t=e.inputInfo;return Object(b.jsxs)(b.Fragment,{children:[t.inputName,": ",Object(b.jsx)("input",{value:t.inputValue,placeholder:t.placeHolder,onChange:t.onChange}),Object(b.jsx)("br",{})]})},g=function(e){var t=e.buttonInfo;return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("button",{type:t.type,onClick:t.onClick,children:t.text})})},C=function(){var e=Object(c.useState)([]),t=Object(a.a)(e,2),n=t[0],r=t[1],u=Object(c.useState)(""),o=Object(a.a)(u,2),i=o[0],l=o[1],p=Object(c.useState)(""),v=Object(a.a)(p,2),C=v[0],k=v[1],w=Object(c.useState)(""),T=Object(a.a)(w,2),y=T[0],N=T[1],D=Object(c.useState)(null),I=Object(a.a)(D,2),S=I[0],E=I[1],M=Object(c.useState)(null),F=Object(a.a)(M,2),H=F[0],V=F[1];Object(c.useEffect)((function(){s().then((function(e){r(e.data)}))}),[]);var A=function(){s().then((function(e){return r(e.data)}))};var J=[{inputName:"name",inputValue:i,placeHolder:"Enter new name",onChange:function(e){return l(e.target.value)}},{inputName:"phone",inputValue:C,placeHolder:"Enter phonenumber",onChange:function(e){return k(e.target.value)}}];return Object(b.jsxs)("div",{className:"phonebook",children:[Object(b.jsx)("h2",{children:"Phonebook"}),Object(b.jsx)(f,{text:S}),Object(b.jsx)(x,{text:H}),Object(b.jsx)(O,{text:"Filter shown with",inputText:y,onChange:function(e){return N(e.target.value)}}),Object(b.jsx)("h3",{children:"Add a new"}),Object(b.jsx)(m,{inputTypes:J}),Object(b.jsx)(g,{buttonInfo:{type:"submit",text:"add",onClick:function(e){e.preventDefault(),j({name:i,phonenumber:C}).then((function(e){void 0===e.data.errorMsg?(E("".concat(e.data.name," Added successfully")),A()):1===e.data.errorMsg.length&&"Name must be unique"===e.data.errorMsg[0]?(console.log(e.data),V("".concat(e.data.userInfo.name," already added, update number coming soon"))):V("".concat(e.data.errorMsg)),setTimeout((function(){V(null),E(null)}),2e3)}))}}}),Object(b.jsx)("h3",{children:"Numbers"}),Object(b.jsx)(h,{filterText:y,persons:n,handleDelete:function(e){var t=n.find((function(t){return t.id===e}));window.confirm("Delete ".concat(t.name," ?"))&&(d(e).then((function(){return A()})),E("Deleted ".concat(t.name)),setTimeout((function(){E(null)}),2e3))}})]})};u.a.render(Object(b.jsx)(C,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.58036727.chunk.js.map