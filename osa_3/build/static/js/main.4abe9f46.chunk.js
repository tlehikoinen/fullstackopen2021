(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{19:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n(14),u=n.n(r),a=(n(19),n(3)),o=n(4),i=n.n(o),l="https://p3-phonebook-backend.herokuapp.com/api/persons",s=function(){return i.a.get(l)},j=function(e){return i.a.post(l,e)},d=function(e){return i.a.delete("".concat(l,"/").concat(e))},b=function(e){return i.a.put("".concat(l,"/").concat(e.id),e)},p=n(0),h=function(e){var t=e.filterText,n=e.persons,c=e.handleDelete;return Object(p.jsx)("ul",{children:n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e,t){return Object(p.jsx)(f,{person:e,handleDelete:c},t)}))})},f=function(e){var t=e.person,n=e.handleDelete;return Object(p.jsxs)("li",{children:[t.name," ",t.phonenumber," ",Object(p.jsx)("button",{onClick:function(){return n(t.id)},children:"delete"})]})},x=function(e){var t=e.text;return null===t?null:Object(p.jsx)("div",{className:"changeText",children:t})},O=function(e){var t=e.text;return null===t?null:Object(p.jsx)("div",{className:"errorText",children:t})},m=function(e){return Object(p.jsxs)("div",{children:[e.text," ",Object(p.jsx)("input",{value:e.inputText,onChange:e.onChange})]})},v=function(e){var t=e.inputTypes;return Object(p.jsx)("form",{children:t.map((function(e,t){return Object(p.jsx)(g,{inputInfo:e},t)}))})},g=function(e){var t=e.inputInfo;return Object(p.jsxs)(p.Fragment,{children:[t.inputName,": ",Object(p.jsx)("input",{value:t.inputValue,placeholder:t.placeHolder,onChange:t.onChange}),Object(p.jsx)("br",{})]})},C=function(e){var t=e.buttonInfo;return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("button",{type:t.type,onClick:t.onClick,children:t.text})})},w=function(){var e=Object(c.useState)([]),t=Object(a.a)(e,2),n=t[0],r=t[1],u=Object(c.useState)(""),o=Object(a.a)(u,2),i=o[0],l=o[1],f=Object(c.useState)(""),g=Object(a.a)(f,2),w=g[0],k=g[1],T=Object(c.useState)(""),y=Object(a.a)(T,2),N=y[0],D=y[1],S=Object(c.useState)(null),I=Object(a.a)(S,2),E=I[0],F=I[1],H=Object(c.useState)(null),V=Object(a.a)(H,2),A=V[0],J=V[1];Object(c.useEffect)((function(){s().then((function(e){r(e.data)}))}),[]);var L=function(){s().then((function(e){return r(e.data)}))},B=[{inputName:"name",inputValue:i,placeHolder:"Enter new name",onChange:function(e){return l(e.target.value)}},{inputName:"phone",inputValue:w,placeHolder:"Enter phonenumber",onChange:function(e){return k(e.target.value)}}];return Object(p.jsxs)("div",{className:"phonebook",children:[Object(p.jsx)("h2",{children:"Phonebook"}),Object(p.jsx)(x,{text:E}),Object(p.jsx)(O,{text:A}),Object(p.jsx)(m,{text:"Filter shown with",inputText:N,onChange:function(e){return D(e.target.value)}}),Object(p.jsx)("h3",{children:"Add a new"}),Object(p.jsx)(v,{inputTypes:B}),Object(p.jsx)(C,{buttonInfo:{type:"submit",text:"add",onClick:function(e){e.preventDefault();var t={name:i,phonenumber:w};j(t).then((function(e){void 0===e.data.error?(F("".concat(e.data.name," Added successfully")),L()):"Name already exists"===e.data.error?window.confirm("".concat(e.data.name," already exists, update number?"))&&(t.id=e.data.id,b(t).then((function(e){F("updateSuccess"),L()}))):J(e.data.error),setTimeout((function(){J(null),F(null)}),2e3)}))}}}),Object(p.jsx)("h3",{children:"Numbers"}),Object(p.jsx)(h,{filterText:N,persons:n,handleDelete:function(e){var t=n.find((function(t){return t.id===e}));window.confirm("Delete ".concat(t.name," ?"))&&(d(e).then((function(){return L()})),F("Deleted ".concat(t.name)),setTimeout((function(){F(null)}),2e3))}})]})};u.a.render(Object(p.jsx)(w,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.4abe9f46.chunk.js.map