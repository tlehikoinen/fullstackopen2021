(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{57:function(e,t,n){},84:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(21),a=n.n(c),s=(n(57),n(11)),i=n(26),u=n(49),o=n(50),l=n(6),j=n.n(l),d=n(8),b=n(24),O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW_NOTIFICATION":return null!==e.timeout&&clearTimeout(e.timeout),Object(b.a)(Object(b.a)({},e),{},{message:t.data.notification,type:t.data.type,timeout:t.data.timeout});case"CLEAR_NOTIFICATION":return"";default:return e}},h=n(18),p=n.n(h),f="/api/blogs",x=null,v=function(){var e=Object(d.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:x}},e.next=3,p.a.post(f,t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(d.a)(j.a.mark((function e(t,n){var r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{Authorization:x}},e.next=3,p.a.put("".concat(f,"/").concat(t),{likes:n+1},r);case 3:return c=e.sent,e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m={addComment:function(){var e=Object(d.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("".concat(f,"/").concat(t,"/comments"),{comment:n});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),addLike:g,createNew:v,getAll:function(){return p.a.get(f).then((function(e){return e.data}))},remove:function(){var e=Object(d.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:x}},e.next=3,p.a.delete("".concat(f,"/").concat(t),n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){x="Bearer ".concat(e)}},y=function(){return function(){var e=Object(d.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.getAll();case 2:n=e.sent,t(w(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},w=function(e){return{type:"SETBLOGS",blogs:e}},k=function(e){return{type:"NEWBLOG",blog:e}},C=function(e){return{type:"REMOVEBLOG",id:e}},N=function(e){return{type:"ADDLIKE",id:e}},S=function(e,t){return{type:"ADDCOMMENT",id:e,comment:{_id:t.id,comment:t.comment}}},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{blogs:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SETBLOGS":return e.blogs=t.blogs.sort((function(e,t){return e.likes<t.likes?1:-1})),e;case"NEWBLOG":var n=e.blogs.concat(t.blog);return e.blogs=n,e;case"ADDCOMMENT":return e.blogs=e.blogs.map((function(e){return e.id===t.id?Object(b.a)(Object(b.a)({},e),{},{comments:e.comments.concat(t.comment)}):e})),e;case"ADDLIKE":return e.blogs=e.blogs.map((function(e){return e.id===t.id?Object(b.a)(Object(b.a)({},e),{},{likes:e.likes+1}):e})),e;case"REMOVEBLOG":return e.blogs=e.blogs.filter((function(e){return e.id!==t.id})),e;case"PRINT":return console.log(e.blogs),e;default:return e}},I=function(e){return{type:"SETUSER",user:{name:e.name,token:e.token,username:e.username}}},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{},loggedIn:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CLEAR":return e.user={},e.loggedIn=!1,e;case"SETUSER":return e.user.name=t.user.name,e.user.token=t.user.token,e.user.username=t.user.username,e.loggedIn=!0,e;case"GETINFO":case"PRINTUSER":default:return e}},E="/api/users",T={createNew:function(){var e=Object(d.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post(E,{username:t.username,name:t.name,password:t.password});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getAll:function(){return p.a.get(E).then((function(e){return e.data}))}},B=function(){return function(){var e=Object(d.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getAll();case 2:n=e.sent,t(D(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},D=function(e){return{type:"SETALL",data:e}},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SETALL":return e.data=t.data,e;case"PRINTALL":return console.log(e.data),e;default:return e}},V=Object(i.combineReducers)({notification:O,blogs:L,user:A,usersAndBlogs:R}),U=Object(i.createStore)(V,Object(o.composeWithDevTools)(Object(i.applyMiddleware)(u.a))),G=n(12),M=n(19),W=n(9),_=n(1),F=function(e){var t=e.blog,n=e.user,c=e.addLike,a=e.deleteBlog,s={background:"none",borderRadius:"5px",borderWidth:"1px"},i=Object(r.useState)(!1),u=Object(G.a)(i,2),o=u[0],l=u[1],j={display:o?"":"none"},d={display:o?"none":""},b={display:n.username===t.user.username?"":"none"},O=function(){l(!o)};return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("th",{className:"visibleDiv",style:d,children:[Object(_.jsxs)(M.b,{to:"/blogs/".concat(t.id),children:[t.title," ",t.author]})," ",Object(_.jsx)("button",{type:"button",style:s,onClick:O,children:"View"})]}),Object(_.jsxs)("th",{className:"hiddenDiv",style:j,children:[Object(_.jsx)("h3",{children:Object(_.jsx)(M.b,{to:"/blogs/".concat(t.id),children:t.title})}),"By author: ",t.author,Object(_.jsx)("br",{}),"Url: ",Object(_.jsx)("a",{href:t.url,target:"_blank",rel:"noreferrer",children:t.url}),Object(_.jsx)("br",{}),"Likes: ",t.likes," ",Object(_.jsx)("button",{type:"button",id:"like-button",style:s,onClick:function(){c(t.id,t.likes)},children:"Like"})," ",Object(_.jsx)("br",{}),Object(_.jsx)("button",{type:"button",style:s,onClick:O,children:"Hide"}),Object(_.jsx)("div",{style:b,children:Object(_.jsx)("button",{type:"button",style:s,onClick:function(){window.confirm("you sure")&&a(t.id)},children:"Remove"})})]})]})},J=n(33),P=function(e){var t=e.create,n=e.createNewVisible,c=e.toggleCreateNewVisible,a=Object(r.useState)(""),s=Object(G.a)(a,2),i=s[0],u=s[1],o=Object(r.useState)(""),l=Object(G.a)(o,2),b=l[0],O=l[1],h=Object(r.useState)(""),p=Object(G.a)(h,2),f=p[0],x=p[1],v={display:n?"none":""},g={display:n?"":"none"},m=function(){var e=Object(d.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),t({title:i,author:b,url:f});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(_.jsxs)("div",{children:[Object(_.jsx)("div",{style:v,children:Object(_.jsx)(J.a,{variant:"primary",type:"button",onClick:c,children:"Create new"})}),Object(_.jsx)("div",{style:g,children:Object(_.jsxs)("form",{onSubmit:m,children:[Object(_.jsx)("h2",{children:"Create New"}),Object(_.jsxs)("div",{children:["title:",Object(_.jsx)("input",{id:"newBlogTitle",type:"text",value:i,name:"Title",onChange:function(e){var t=e.target;return u(t.value)}})]}),Object(_.jsxs)("div",{children:["author:",Object(_.jsx)("input",{id:"newBlogAuthor",type:"text",value:b,name:"Author",onChange:function(e){var t=e.target;return O(t.value)}})]}),Object(_.jsxs)("div",{children:["url:",Object(_.jsx)("input",{id:"newBlogUrl",type:"text",value:f,name:"Url",onChange:function(e){var t=e.target;return x(t.value)}})]}),Object(_.jsx)(J.a,{variant:"success",id:"submitNewBlog-button",type:"submit",children:"Create"}),Object(_.jsx)(J.a,{variant:"danger",id:"cancelNewBlog-button",type:"button",onClick:c,children:"Cancel"})]})})]})},z=n(88),K=function(e){var t=e.login,n=e.setSignInVisible,c=Object(r.useState)(""),a=Object(G.a)(c,2),s=a[0],i=a[1],u=Object(r.useState)(""),o=Object(G.a)(u,2),l=o[0],j=o[1];return Object(_.jsxs)("div",{children:[Object(_.jsx)("h2",{children:"Log in to application"}),Object(_.jsx)(z.a,{onSubmit:function(e){e.preventDefault(),t({username:s,password:l})},children:Object(_.jsxs)(z.a.Group,{children:[Object(_.jsx)(z.a.Label,{children:"username"}),Object(_.jsx)(z.a.Control,{id:"username",type:"text",name:"username",value:s,onChange:function(e){var t=e.target;return i(t.value)}}),Object(_.jsx)(z.a.Label,{children:"password"}),Object(_.jsx)(z.a.Control,{id:"password",type:"password",name:"password",value:l,onChange:function(e){var t=e.target;return j(t.value)}}),Object(_.jsx)(J.a,{variant:"primary",id:"login-button",type:"submit",children:"Login"}),Object(_.jsx)(J.a,{variant:"primary",id:"show-signin",type:"button",onClick:n,children:"Sign in"})]})})]})},H=function(e){var t=e.signin,n=e.signInVisible,c=Object(r.useState)(""),a=Object(G.a)(c,2),s=a[0],i=a[1],u=Object(r.useState)(""),o=Object(G.a)(u,2),l=o[0],j=o[1],d=Object(r.useState)(""),b=Object(G.a)(d,2),O=b[0],h=b[1],p={display:n?"block":"none"};return Object(_.jsx)("div",{children:Object(_.jsxs)("div",{style:p,children:[Object(_.jsx)("h2",{children:"Create new account"}),Object(_.jsx)(z.a,{onSubmit:function(e){e.preventDefault(),t({username:s,name:l,password:O})},children:Object(_.jsxs)(z.a.Group,{children:[Object(_.jsx)(z.a.Label,{children:"username"}),Object(_.jsx)(z.a.Control,{id:"SignInUsername",type:"text",name:"username",value:s,onChange:function(e){var t=e.target;return i(t.value)}}),Object(_.jsx)(z.a.Label,{children:"name"}),Object(_.jsx)(z.a.Control,{id:"SignInName",type:"text",name:"name",value:l,onChange:function(e){var t=e.target;return j(t.value)}}),Object(_.jsx)(z.a.Label,{children:"password"}),Object(_.jsx)(z.a.Control,{id:"SignInPassword",type:"password",name:"password",value:O,onChange:function(e){var t=e.target;return h(t.value)}}),Object(_.jsx)(J.a,{variant:"primary",id:"signin-button",type:"submit",children:"Submit"})]})})]})})},q=function(){var e=Object(s.c)((function(e){return e.notification.message})),t=function(e){var t=e.message;return null===t?null:Object(_.jsx)("div",{className:"errorNotification",children:t})},n=function(e){var t=e.message;return null===t?null:Object(_.jsx)("div",{className:"notification",children:t})};switch(Object(s.c)((function(e){return e.notification.type}))){case"error":return Object(_.jsx)(t,{message:e});case"default":return Object(_.jsx)(n,{message:e});default:return Object(_.jsx)(_.Fragment,{})}},Q={login:function(){var e=Object(d.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},X=n(86),Y=n(87),Z=n(89),$=function(){var e=Object(r.useState)(!1),t=Object(G.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(!1),i=Object(G.a)(a,2),u=i[0],o=i[1],l=Object(s.b)();Object(r.useEffect)((function(){l(y()),l(B())}),[l]),Object(r.useEffect)((function(){var e=window.localStorage.getItem("loggedInUser");if(e){var t=JSON.parse(e);w(t),m.setToken(t.token)}else l({type:"CLEAR"})}),[]);var b=function(){var e=Object(d.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.addLike(t,n);case 3:l(N(t)),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),O=function(){var e=Object(d.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.createNew(t);case 3:r=e.sent,g("".concat(r.title," by ").concat(r.author," was successfully added"),"default",3),l(k(r)),l(y()),l(B()),c(!n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),g(e.t0.response.data.error,"error",3);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(d.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.remove(t);case 3:n=e.sent,l(C(t)),l(B()),g(n.Message,"default",3),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),l(y()),g("Was already deleted","error",3);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(d.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q.login(t);case 3:n=e.sent,l(I(n)),window.localStorage.setItem("loggedInUser",JSON.stringify(n)),m.setToken(n.token),g("Logged in successfully","default",1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),g("Wrong credentials","error",5);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),f=function(e){e.preventDefault(),window.localStorage.clear(),l({type:"CLEAR"}),g("Logged out successfully","default",1)},x=function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.createNew(t);case 3:o(!u),l(B()),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),g(e.t0.message,"error",2);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(d.a)(j.a.mark((function e(t,n,r){var c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.addComment(t,n);case 3:c=e.sent,a=c.message.comments[c.message.comments.length-1],l(S(t,n={id:a._id,comment:a.comment})),r(""),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n,r){return e.apply(this,arguments)}}(),g=function(e,t,n){l(function(e,t,n){return function(){var r=Object(d.a)(j.a.mark((function r(c){var a;return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=setTimeout((function(){c({type:"CLEAR_NOTIFICATION"})}),1e3*n),c({type:"NEW_NOTIFICATION",data:{notification:(s={message:e,type:t,timeout:a}).message,type:s.type,timeout:s.timeout}});case 2:case"end":return r.stop()}var s}),r)})));return function(e){return r.apply(this,arguments)}}()}(e,t,n))},w=function(e){l(I(e))},L={padding:"10px"},A=function(){var e=Object(s.c)((function(e){return e.blogs.blogs})),t=Object(s.c)((function(e){return e.user.user}));return Object(_.jsxs)("div",{children:[Object(_.jsx)("h2",{children:"Blogs"}),Object(_.jsx)("div",{className:"blogs",children:Object(_.jsx)(X.a,{striped:!0,children:Object(_.jsx)("tbody",{children:e.map((function(e){return Object(_.jsx)("tr",{children:Object(_.jsx)(F,{blog:e,user:t,addLike:b,deleteBlog:h},e.id)},e.id)}))})})})]})},E=function(){var e=Object(s.c)((function(e){return e.usersAndBlogs.data}));return Object(_.jsxs)("div",{children:[Object(_.jsx)("h2",{children:"Users"}),Object(_.jsxs)("table",{children:[Object(_.jsx)("thead",{children:Object(_.jsxs)("tr",{children:[Object(_.jsx)("th",{children:"Name"}),Object(_.jsx)("th",{children:"Blogs"})]})}),Object(_.jsx)("tbody",{children:e.map((function(e){return Object(_.jsxs)("tr",{children:[Object(_.jsxs)("td",{children:[Object(_.jsx)(M.b,{to:"/users/".concat(e.id),children:e.name})," "]}),Object(_.jsx)("td",{children:e.blogs.length})]},e.id)}))})]})]})},D=function(){var e=Object(s.c)((function(e){return e.usersAndBlogs})),t=Object(W.f)().id,n=e.data.find((function(e){return e.id===t}));return n?Object(_.jsxs)("div",{children:[Object(_.jsx)("h2",{children:n.name}),Object(_.jsx)("h3",{children:"Added blogs"}),Object(_.jsx)("ul",{children:n.blogs.map((function(e){return Object(_.jsx)("li",{children:Object(_.jsx)(M.b,{to:"/blogs/".concat(e.id),children:e.title})},e.id)}))})]}):null},R=function(){var e=Object(W.f)().id,t=Object(s.c)((function(e){return e.blogs.blogs})),n=Object(s.c)((function(e){return e.user.user.name})),c=t.find((function(t){return t.id===e})),a=Object(r.useState)(""),i=Object(G.a)(a,2),u=i[0],o=i[1];if(!c||!n)return null;var l=0!==c.comments.length?c.comments:void 0,j={display:n===c.user.name?"":"none"};return Object(_.jsxs)("div",{children:[Object(_.jsxs)("div",{children:[Object(_.jsxs)("h2",{children:[c.title," by ",c.author]}),Object(_.jsx)("p",{children:Object(_.jsx)("a",{href:c.url,children:c.url})}),Object(_.jsxs)("div",{children:[c.likes," likes",Object(_.jsx)("button",{type:"button",onClick:function(){return b(c.id,c.likes)},children:" like"}),Object(_.jsx)("button",{style:j,type:"remove",onClick:function(){window.confirm("you sure")&&h(c.id)},children:"Delete"})]}),Object(_.jsxs)("p",{children:["Added by ",c.user.name]})]}),Object(_.jsxs)("div",{children:[Object(_.jsx)("h2",{children:"Comments"}),Object(_.jsx)("input",{value:u,onChange:function(e){var t=e.target;return o(t.value)}}),Object(_.jsx)("button",{type:"button",onClick:function(){return v(c.id,u,o)},children:"Add comment"}),void 0!==l?Object(_.jsx)("div",{children:Object(_.jsx)("ul",{children:l.map((function(e){return Object(_.jsx)("li",{children:e.comment},e._id)}))})}):Object(_.jsx)("h2",{children:"No comments yet"})]})]})},V=function(){var e=Object(s.c)((function(e){return e.user.user}));return Object(_.jsxs)(Y.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:[Object(_.jsx)(Y.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(_.jsx)(Y.a.Collapse,{id:"responsive-navbar-nav",children:Object(_.jsxs)(Z.a,{className:"mr-auto",children:[Object(_.jsx)(Z.a.Link,{href:"#",as:"span",children:Object(_.jsx)(M.b,{style:L,to:"/",children:"home"})}),Object(_.jsx)(Z.a.Link,{href:"#",as:"span",children:Object(_.jsx)(M.b,{style:L,to:"/blogs",children:"blogs"})}),Object(_.jsx)(Z.a.Link,{href:"#",as:"span",children:Object(_.jsx)(M.b,{style:L,to:"/users",children:"users"})}),Object(_.jsxs)(Z.a.Link,{href:"#",as:"span",children:[e.name," logged in ",Object(_.jsx)(J.a,{variant:"danger",onClick:f,children:"logout"})]})]})})]})},U=function(){return Object(_.jsx)("div",{children:Object(_.jsxs)(M.a,{children:[Object(_.jsx)(V,{}),Object(_.jsx)("h2",{children:"Blog app"}),Object(_.jsxs)(W.c,{children:[Object(_.jsx)(W.a,{path:"/blogs/:id",children:Object(_.jsx)(R,{})}),Object(_.jsx)(W.a,{path:"/blogs",children:Object(_.jsxs)("div",{children:[Object(_.jsx)(P,{createNewVisible:n,toggleCreateNewVisible:function(){return c(!n)},create:O}),Object(_.jsx)(A,{})]})}),Object(_.jsx)(W.a,{path:"/users/:id",children:Object(_.jsx)(D,{})}),Object(_.jsx)(W.a,{path:"/users",children:Object(_.jsx)(E,{})}),Object(_.jsx)(W.a,{path:"/",children:Object(_.jsx)("h2",{children:"Blogs are great"})})]})]})})},z=function(){return Object(_.jsxs)("div",{children:[Object(_.jsx)(K,{login:p,setSignInVisible:function(){return o(!u)}}),Object(_.jsx)(H,{signin:x,signInVisible:u})]})};return Object(_.jsxs)("div",{className:"container",children:[Object(_.jsx)(q,{message:Object(s.c)((function(e){return e.message})),type:Object(s.c)((function(e){return e.type}))}),!1===Object(s.c)((function(e){return e.user.loggedIn}))&&Object(_.jsx)(z,{}),!0===Object(s.c)((function(e){return e.user.loggedIn}))&&Object(_.jsx)(U,{})]})};a.a.render(Object(_.jsx)(s.a,{store:U,children:Object(_.jsx)($,{})}),document.getElementById("root"))}},[[84,1,2]]]);
//# sourceMappingURL=main.d0caf207.chunk.js.map